var abstraction_sdk = (function () {
    'use strict';

    class WebMessage extends Muffin.Lexeme {}

    Object.defineProperty(WebMessage, "name", {
      enumerable: true,
      writable: true,
      value: ""
    });
    Object.defineProperty(WebMessage, "request_schema", {
      enumerable: true,
      writable: true,
      value: {
        uid: null,
        sender: null,
        params: {},
        subject: null,
        objective: {}
      }
    });
    Object.defineProperty(WebMessage, "schema", {
      enumerable: true,
      writable: true,
      value: {
        interface: null,
        token: null,
        request: null,
        subscribe: null
      }
    });

    const API_LEXICON = { ...{},
      ...WebMessage
    };
    const config = {
      sandbox_local: {
        hostName: "localhost:8877",
        path: "wsapi",
        channelInstanceSig: 12,
        api_protocol: "ws://"
      },
      sandbox: {
        hostName: "sandbox.autostore-sdk.drona.footloose.io",
        path: "wsapi",
        channelInstanceSig: 12,
        api_protocol: "wss://"
      }
    };
    Muffin.WebRequestSdk = class {
      constructor(options, lazyload = true) {
        console.debug("##ConnectMethod constructor", options);
        this.eventInterface = PostOffice.getOrCreateInterface("WebRequestSdk");
        this.LEXICON = API_LEXICON;
        this.uid = "";
        this.label = options.label || "drona_store_sdk_client";
        this.clientId = options.client_id || "";
        this.token = options.token || "";
        this.pass = "";
        this.connectedStores = [];
        this.uiVars = {
          clock: {},
          config: config[options.label]
        };
        this._connection = null;
        this.state = null;
      }

      async connect() {
        console.debug("##ConnectMethod connect", this.options);
        this.uiVars.eventSubscriptions = new Set([]);
        this.uiVars.eventCounters = {};
        return new Promise((resolve, reject) => {
          var finalUrl = this.uiVars.config.api_protocol + this.uiVars.config.hostName + "/" + this.uiVars.config.path + "/" + this.clientId + "?auth=" + this.token;
          console.debug("imp:", finalUrl);
          console.debug("imp:", this.uiVars.config);
          this._connection = Muffin.PostOffice.addSocket(WebSocket, this.label, finalUrl);
          this._connection.autoRetryOnClose = false;

          this._connection.socket.onerror = e => {
            let msg = `connection failed: ${e.message}`;
            console.debug("imp:", msg);
            this.state = e;
            this.eventInterface.dispatchMessage("error", e);
            return reject({
              state: this.state,
              msg: msg
            });
          };

          this._connection.socket.onopen = e => {
            let msg = `connection established`;
            this.state = e;
            this.eventInterface.dispatchMessage("connect");
            return resolve({
              state: this.state,
              msg: msg
            });
          };

          this._connection.socket.onclose = e => {
            let msg = `connection closed`;
            this.state = e;
            this.eventInterface.dispatchMessage("close", e);
            return reject({
              state: this.state,
              msg: msg
            });
          };

          this._connection.socket.onmessage = e => {
            var _msgStr = e.data;

            try {
              var _msg = JSON.parse(_msgStr);

              console.debug("##on message ", _msg);

              if (_msg.error) {
                this.eventInterface.dispatchMessage("error", _msg);
              } else {
                // this.eventInterface.dispatchMessage("incoming-msg", [_msg]);
                this.eventInterface.dispatchMessage("incoming-msg", _msg);

                if (_msg.op.includes("EVENT:::")) {
                  this.eventInterface.dispatchMessage("incoming-event", _msg);
                } else {
                  this.eventInterface.dispatchMessage("incoming-response", _msg);
                }
              }
            } catch (e) {
              console.debug("## error", e);
              this.eventInterface.dispatchMessage("error", e);
            }
          };
        });
      }

      getSerializableIntro() {
        return Object.keys(this.LEXICON).map(_lexeme => {
          let _schema = this.LEXICON[_lexeme].schema.request || {};

          return {
            label: _lexeme,
            fullName: this.LEXICON[_lexeme].name,
            schema: _schema
          };
        });
      }

      getIntro() {
        return this.LEXICON;
      }

      _getLexeme(_lexemeLabel) {
        return this.LEXICON[_lexemeLabel];
      }

      _inflectLexeme(_lexemeLabel, _msg) {
        if (!_lexemeLabel || !_msg) {
          console.error("Error:", "Invalid Request.");
          return;
        }

        var _selectedLexeme = this._getLexeme(_lexemeLabel);

        if (!_selectedLexeme) {
          console.error("Error:", "Unknown Request.");
          return;
        }

        console.debug("Generating fixtures for lexeme - ", _selectedLexeme);

        if (_msg == "random") {
          try {
            var _selectedLexemeInflection = _selectedLexeme.inflect({});

            _selectedLexemeInflection.genFixtures();
          } catch (e) {
            console.error(e);
            return;
          }
        } else {
          try {
            var _selectedLexemeInflection = _selectedLexeme.inflect(_msg);
          } catch (e) {
            console.error(e);
            return;
          }
        }

        return _selectedLexemeInflection.stringify();
      }

      communicate(_lexemeLabel, _msg) {
        // try{
        // 	JSON.parse(_msg);
        // }catch(e){
        // 	let msg = "invalid json payload";
        // 	console.error("Error:", msg);
        // 	return;
        // }
        let inflection = this._inflectLexeme(_lexemeLabel, _msg);

        if (!inflection) {
          return;
        }

        this.uiVars.clock.testStart = Date.now() / 1000;

        this._connection.send(inflection);
      }

      async request(_lexemeLabel, _msg, _opLabel, options = {
        MAX_RESPONSE_TIME: 5000
      }) {
        return new Promise((resolve, reject) => {
          this.communicate(_lexemeLabel, _msg);

          if (!_opLabel) {
            return resolve({
              message: "Message sent. No resp_op provided."
            });
          }

          this.eventInterface.on("incoming-msg", msg => {
            if (msg.op === _opLabel && msg.result != null) {
              return resolve(msg);
            }
          });
          this.eventInterface.on("error", msg => {
            return reject(msg);
          });
          setTimeout(() => {
            return reject({
              message: `No response received in ${this.MAX_RESPONSE_TIME / 1000}s`
            });
          }, options.MAX_RESPONSE_TIME);
        });
      }

      _createEventSubscription(_msg) {
        this.uiVars.eventSubscriptions.add(_name);
        this.uiVars.eventCounters[`EVENT:::${_name}`] = 0;
        Muffin.PostOffice.sockets.global.broadcastMsg("subscription-created", _msg);
      }

      _connectHost() {

        this._connection.onerror = e => {
          let msg = `connection failed: ${e.message}`;
          console.log("imp:", msg);
        };

        this._connection.onopen = e => {
        };

        this._connection.onclose = e => {
        };

        this._connection.onmessage = _connectionMsgEv => {
          //custom onmessage functions can be provided by the developer.
          // console.log("imp:", "-------------------------------",_connectionMsgEv);
          var _msgStr = _connectionMsgEv.data;

          if (_msgStr == "response:") {
            return;
          } //ping-pong messages exchanged in keepAlive


          var ev = null;

          try {
            var _msg = JSON.parse(_msgStr);

            if (_msg.op.includes("EVENT:::")) {
              ev = new CustomEvent("incoming-hostagent-event-msg", {
                detail: _msg
              });
            } else {
              ev = new CustomEvent("incoming-hostagent-response-msg", {
                detail: _msg
              });
            }
          } catch (e) {
            //not valid msg
            var _msg = {
              error: e,
              label: `${this.name}-message-error`
            };
            ev = new CustomEvent(_msg.label, {
              detail: _msg
            });
          }

          return ev;
        };

        this._connection.on("incoming-hostagent-response-msg", msg => {
          console.debug("Event:", " incoming-hostagent-response-msg = ", msg); // this.uiVars.hostagentResponseMsgLogEl.appendChild(tableHtml);

          if (msg.op.includes("|||") && msg.statusCode == 2) {
            this._createEventSubscription(msg.op);
          }
        });

        this._connection.on("incoming-hostagent-event-msg", msg => {
          console.debug("Event:", " incoming-hostagent-event-msg = ", msg);
          this.uiVars.eventCounters[msg.op] += 1; // this.uiVars.hostagentResponseMsgLogEl.appendChild(tableHtml);
        });
      }

      onConnect() {}

    };

    return Muffin;

}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2RrLmpzIiwic291cmNlcyI6WyIuLi9zcmMvbGV4aWNvbi5qcyIsIi4uL3NyYy9tYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFdlYk1lc3NhZ2UgZXh0ZW5kcyBNdWZmaW4uTGV4ZW1lIHtcbiAgICBzdGF0aWMgbmFtZSA9IFwiXCI7XG5cbiAgICBzdGF0aWMgcmVxdWVzdF9zY2hlbWEgPSB7XG4gICAgICAgIHVpZDogbnVsbCxcbiAgICAgICAgc2VuZGVyOiBudWxsLFxuICAgICAgICBwYXJhbXM6IHt9LFxuICAgICAgICBzdWJqZWN0OiBudWxsLFxuICAgICAgICBvYmplY3RpdmU6IHt9XG4gICAgfVxuXG4gICAgc3RhdGljIHNjaGVtYSA9IHtcbiAgICAgICAgaW50ZXJmYWNlOiBudWxsLFxuICAgICAgICB0b2tlbjogbnVsbCxcbiAgICAgICAgcmVxdWVzdDogbnVsbCxcbiAgICAgICAgc3Vic2NyaWJlOiBudWxsLFxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgV2ViTWVzc2FnZVxuIiwiaW1wb3J0IFdFQl9NRVNTQUdFX0xFWElDT04gZnJvbSBcIi4vbGV4aWNvblwiO1xuY29uc3QgQVBJX0xFWElDT04gPSB7Li4ue30sIC4uLldFQl9NRVNTQUdFX0xFWElDT059O1xuXG5jb25zdCBjb25maWcgPSB7XG4gICAgc2FuZGJveF9sb2NhbDoge1xuICAgICAgICBob3N0TmFtZTogXCJsb2NhbGhvc3Q6ODg3N1wiLFxuICAgICAgICBwYXRoOiBcIndzYXBpXCIsXG4gICAgICAgIGNoYW5uZWxJbnN0YW5jZVNpZzogMTIsXG4gICAgICAgIGFwaV9wcm90b2NvbDogXCJ3czovL1wiXG4gICAgfSxcbiAgICBzYW5kYm94OiB7XG4gICAgICAgIGhvc3ROYW1lOiBcInNhbmRib3guYXV0b3N0b3JlLXNkay5kcm9uYS5mb290bG9vc2UuaW9cIixcbiAgICAgICAgcGF0aDogXCJ3c2FwaVwiLFxuICAgICAgICBjaGFubmVsSW5zdGFuY2VTaWc6IDEyLFxuICAgICAgICBhcGlfcHJvdG9jb2w6IFwid3NzOi8vXCJcbiAgICB9XG59XG5cblxuTXVmZmluLldlYlJlcXVlc3RTZGsgPSBjbGFzcyB7XG5cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLCBsYXp5bG9hZCA9IHRydWUpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhcIiMjQ29ubmVjdE1ldGhvZCBjb25zdHJ1Y3RvclwiLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5ldmVudEludGVyZmFjZSA9IFBvc3RPZmZpY2UuZ2V0T3JDcmVhdGVJbnRlcmZhY2UoXCJXZWJSZXF1ZXN0U2RrXCIpXG4gICAgICAgIHRoaXMuTEVYSUNPTiA9IEFQSV9MRVhJQ09OO1xuICAgICAgICB0aGlzLnVpZCA9IFwiXCI7XG4gICAgICAgIHRoaXMubGFiZWwgPSBvcHRpb25zLmxhYmVsIHx8IFwiZHJvbmFfc3RvcmVfc2RrX2NsaWVudFwiO1xuICAgICAgICB0aGlzLmNsaWVudElkID0gb3B0aW9ucy5jbGllbnRfaWQgfHwgXCJcIjtcbiAgICAgICAgdGhpcy50b2tlbiA9IG9wdGlvbnMudG9rZW4gfHwgXCJcIjtcbiAgICAgICAgdGhpcy5wYXNzID0gXCJcIjtcbiAgICAgICAgdGhpcy5jb25uZWN0ZWRTdG9yZXMgPSBbXTtcbiAgICAgICAgdGhpcy51aVZhcnMgPSB7XG4gICAgICAgICAgICBjbG9jazoge30sXG4gICAgICAgICAgICBjb25maWc6IGNvbmZpZ1tvcHRpb25zLmxhYmVsXVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2Nvbm5lY3Rpb24gPSBudWxsO1xuICAgICAgICB0aGlzLnN0YXRlID0gbnVsbDtcbiAgICB9XG5cbiAgICBhc3luYyBjb25uZWN0KCkge1xuICAgICAgICBjb25zb2xlLmRlYnVnKFwiIyNDb25uZWN0TWV0aG9kIGNvbm5lY3RcIiwgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgdGhpcy51aVZhcnMuZXZlbnRTdWJzY3JpcHRpb25zID0gbmV3IFNldChbXSk7XG4gICAgICAgIHRoaXMudWlWYXJzLmV2ZW50Q291bnRlcnMgPSB7fTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHZhciBmaW5hbFVybCA9IHRoaXMudWlWYXJzLmNvbmZpZy5hcGlfcHJvdG9jb2wgKyB0aGlzLnVpVmFycy5jb25maWcuaG9zdE5hbWUgKyBcIi9cIiArIHRoaXMudWlWYXJzLmNvbmZpZy5wYXRoICsgXCIvXCIgKyB0aGlzLmNsaWVudElkICsgXCI/YXV0aD1cIiArIHRoaXMudG9rZW5cbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCJpbXA6XCIsIGZpbmFsVXJsKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCJpbXA6XCIsIHRoaXMudWlWYXJzLmNvbmZpZyk7XG4gICAgICAgICAgICB0aGlzLl9jb25uZWN0aW9uID0gTXVmZmluLlBvc3RPZmZpY2UuYWRkU29ja2V0KFdlYlNvY2tldCwgdGhpcy5sYWJlbCwgZmluYWxVcmwpO1xuICAgICAgICAgICAgdGhpcy5fY29ubmVjdGlvbi5hdXRvUmV0cnlPbkNsb3NlID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHRoaXMuX2Nvbm5lY3Rpb24uc29ja2V0Lm9uZXJyb3IgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBtc2cgPSBgY29ubmVjdGlvbiBmYWlsZWQ6ICR7ZS5tZXNzYWdlfWA7XG4gICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhcImltcDpcIiwgbXNnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gZTtcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SW50ZXJmYWNlLmRpc3BhdGNoTWVzc2FnZShcImVycm9yXCIsIGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Qoe3N0YXRlOiB0aGlzLnN0YXRlLCBtc2c6IG1zZ30pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fY29ubmVjdGlvbi5zb2NrZXQub25vcGVuID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgbXNnID0gYGNvbm5lY3Rpb24gZXN0YWJsaXNoZWRgO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBlO1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRJbnRlcmZhY2UuZGlzcGF0Y2hNZXNzYWdlKFwiY29ubmVjdFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7c3RhdGU6IHRoaXMuc3RhdGUsIG1zZzogbXNnfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2Nvbm5lY3Rpb24uc29ja2V0Lm9uY2xvc2UgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBtc2cgPSBgY29ubmVjdGlvbiBjbG9zZWRgO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBlO1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRJbnRlcmZhY2UuZGlzcGF0Y2hNZXNzYWdlKFwiY2xvc2VcIiwgZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdCh7c3RhdGU6IHRoaXMuc3RhdGUsIG1zZzogbXNnfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2Nvbm5lY3Rpb24uc29ja2V0Lm9ubWVzc2FnZSA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9tc2dTdHIgPSBlLmRhdGE7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9tc2cgPSBKU09OLnBhcnNlKF9tc2dTdHIpXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCIjI29uIG1lc3NhZ2UgXCIsIF9tc2cpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoX21zZy5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEludGVyZmFjZS5kaXNwYXRjaE1lc3NhZ2UoXCJlcnJvclwiLCBfbXNnKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5ldmVudEludGVyZmFjZS5kaXNwYXRjaE1lc3NhZ2UoXCJpbmNvbWluZy1tc2dcIiwgW19tc2ddKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRJbnRlcmZhY2UuZGlzcGF0Y2hNZXNzYWdlKFwiaW5jb21pbmctbXNnXCIsIF9tc2cpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX21zZy5vcC5pbmNsdWRlcyhcIkVWRU5UOjo6XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEludGVyZmFjZS5kaXNwYXRjaE1lc3NhZ2UoXCJpbmNvbWluZy1ldmVudFwiLCBfbXNnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEludGVyZmFjZS5kaXNwYXRjaE1lc3NhZ2UoXCJpbmNvbWluZy1yZXNwb25zZVwiLCBfbXNnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhcIiMjIGVycm9yXCIsIGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SW50ZXJmYWNlLmRpc3BhdGNoTWVzc2FnZShcImVycm9yXCIsIGUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuXG4gICAgZ2V0U2VyaWFsaXphYmxlSW50cm8oKSB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLkxFWElDT04pLm1hcCgoX2xleGVtZSkgPT4ge1xuICAgICAgICAgICAgbGV0IF9zY2hlbWEgPSB0aGlzLkxFWElDT05bX2xleGVtZV0uc2NoZW1hLnJlcXVlc3QgfHwge307XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGxhYmVsOiBfbGV4ZW1lLFxuICAgICAgICAgICAgICAgIGZ1bGxOYW1lOiB0aGlzLkxFWElDT05bX2xleGVtZV0ubmFtZSxcbiAgICAgICAgICAgICAgICBzY2hlbWE6IF9zY2hlbWFcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0SW50cm8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkxFWElDT047XG4gICAgfVxuXG4gICAgX2dldExleGVtZShfbGV4ZW1lTGFiZWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuTEVYSUNPTltfbGV4ZW1lTGFiZWxdO1xuICAgIH1cblxuICAgIF9pbmZsZWN0TGV4ZW1lKF9sZXhlbWVMYWJlbCwgX21zZykge1xuICAgICAgICBpZiAoIV9sZXhlbWVMYWJlbCB8fCAhX21zZykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBcIkludmFsaWQgUmVxdWVzdC5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgX3NlbGVjdGVkTGV4ZW1lID0gdGhpcy5fZ2V0TGV4ZW1lKF9sZXhlbWVMYWJlbCk7XG4gICAgICAgIGlmICghX3NlbGVjdGVkTGV4ZW1lKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIFwiVW5rbm93biBSZXF1ZXN0LlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUuZGVidWcoXCJHZW5lcmF0aW5nIGZpeHR1cmVzIGZvciBsZXhlbWUgLSBcIiwgX3NlbGVjdGVkTGV4ZW1lKTtcblxuICAgICAgICBpZiAoX21zZyA9PSBcInJhbmRvbVwiKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBfc2VsZWN0ZWRMZXhlbWVJbmZsZWN0aW9uID0gX3NlbGVjdGVkTGV4ZW1lLmluZmxlY3Qoe30pO1xuICAgICAgICAgICAgICAgIF9zZWxlY3RlZExleGVtZUluZmxlY3Rpb24uZ2VuRml4dHVyZXMoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIF9zZWxlY3RlZExleGVtZUluZmxlY3Rpb24gPSBfc2VsZWN0ZWRMZXhlbWUuaW5mbGVjdChfbXNnKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBfc2VsZWN0ZWRMZXhlbWVJbmZsZWN0aW9uLnN0cmluZ2lmeSgpO1xuICAgIH1cblxuICAgIGNvbW11bmljYXRlKF9sZXhlbWVMYWJlbCwgX21zZykge1xuICAgICAgICAvLyB0cnl7XG4gICAgICAgIC8vIFx0SlNPTi5wYXJzZShfbXNnKTtcbiAgICAgICAgLy8gfWNhdGNoKGUpe1xuICAgICAgICAvLyBcdGxldCBtc2cgPSBcImludmFsaWQganNvbiBwYXlsb2FkXCI7XG4gICAgICAgIC8vIFx0Y29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBtc2cpO1xuICAgICAgICAvLyBcdHJldHVybjtcbiAgICAgICAgLy8gfVxuICAgICAgICBsZXQgaW5mbGVjdGlvbiA9IHRoaXMuX2luZmxlY3RMZXhlbWUoX2xleGVtZUxhYmVsLCBfbXNnKTtcbiAgICAgICAgaWYgKCFpbmZsZWN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51aVZhcnMuY2xvY2sudGVzdFN0YXJ0ID0gRGF0ZS5ub3coKSAvIDEwMDA7XG4gICAgICAgIHRoaXMuX2Nvbm5lY3Rpb24uc2VuZChpbmZsZWN0aW9uKTtcbiAgICB9XG5cbiAgICBhc3luYyByZXF1ZXN0KF9sZXhlbWVMYWJlbCwgX21zZywgX29wTGFiZWwsIG9wdGlvbnMgPSB7TUFYX1JFU1BPTlNFX1RJTUU6IDUwMDB9KSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNvbW11bmljYXRlKF9sZXhlbWVMYWJlbCwgX21zZyk7XG4gICAgICAgICAgICBpZighX29wTGFiZWwpe1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHttZXNzYWdlOiBcIk1lc3NhZ2Ugc2VudC4gTm8gcmVzcF9vcCBwcm92aWRlZC5cIn0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmV2ZW50SW50ZXJmYWNlLm9uKFwiaW5jb21pbmctbXNnXCIsIChtc2cpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobXNnLm9wID09PSBfb3BMYWJlbCAmJiBtc2cucmVzdWx0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUobXNnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRJbnRlcmZhY2Uub24oXCJlcnJvclwiLCAobXNnKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChtc2cpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Qoe21lc3NhZ2U6YE5vIHJlc3BvbnNlIHJlY2VpdmVkIGluICR7dGhpcy5NQVhfUkVTUE9OU0VfVElNRSAvIDEwMDB9c2B9KVxuICAgICAgICAgICAgfSwgb3B0aW9ucy5NQVhfUkVTUE9OU0VfVElNRSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9jcmVhdGVFdmVudFN1YnNjcmlwdGlvbihfbXNnKSB7XG4gICAgICAgIHRoaXMudWlWYXJzLmV2ZW50U3Vic2NyaXB0aW9ucy5hZGQoX25hbWUpO1xuICAgICAgICB0aGlzLnVpVmFycy5ldmVudENvdW50ZXJzW2BFVkVOVDo6OiR7X25hbWV9YF0gPSAwO1xuICAgICAgICBNdWZmaW4uUG9zdE9mZmljZS5zb2NrZXRzLmdsb2JhbC5icm9hZGNhc3RNc2coXCJzdWJzY3JpcHRpb24tY3JlYXRlZFwiLCBfbXNnKTtcbiAgICB9XG5cbiAgICBfY29ubmVjdEhvc3QoKSB7XG4gICAgICAgIGxldCBtc2cgPSBgY29ubmVjdGluZyB3aXRoIGFwaSBob3N0YDtcblxuICAgICAgICB0aGlzLl9jb25uZWN0aW9uLm9uZXJyb3IgPSAoZSkgPT4ge1xuICAgICAgICAgICAgbGV0IG1zZyA9IGBjb25uZWN0aW9uIGZhaWxlZDogJHtlLm1lc3NhZ2V9YDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaW1wOlwiLCBtc2cpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2Nvbm5lY3Rpb24ub25vcGVuID0gKGUpID0+IHtcbiAgICAgICAgICAgIGxldCBtc2cgPSBgY29ubmVjdGlvbiBlc3RhYmxpc2hlZGA7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9jb25uZWN0aW9uLm9uY2xvc2UgPSAoZSkgPT4ge1xuICAgICAgICAgICAgbGV0IG1zZyA9IGBjb25uZWN0aW9uIGNsb3NlZGA7XG4gICAgICAgIH1cblxuXG4gICAgICAgIHRoaXMuX2Nvbm5lY3Rpb24ub25tZXNzYWdlID0gKF9jb25uZWN0aW9uTXNnRXYpID0+IHsgLy9jdXN0b20gb25tZXNzYWdlIGZ1bmN0aW9ucyBjYW4gYmUgcHJvdmlkZWQgYnkgdGhlIGRldmVsb3Blci5cbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiaW1wOlwiLCBcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIixfY29ubmVjdGlvbk1zZ0V2KTtcbiAgICAgICAgICAgIHZhciBfbXNnU3RyID0gX2Nvbm5lY3Rpb25Nc2dFdi5kYXRhO1xuICAgICAgICAgICAgaWYgKF9tc2dTdHIgPT0gXCJyZXNwb25zZTpcIikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gLy9waW5nLXBvbmcgbWVzc2FnZXMgZXhjaGFuZ2VkIGluIGtlZXBBbGl2ZVxuICAgICAgICAgICAgdmFyIGV2ID0gbnVsbDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIF9tc2cgPSBKU09OLnBhcnNlKF9tc2dTdHIpO1xuICAgICAgICAgICAgICAgIGlmIChfbXNnLm9wLmluY2x1ZGVzKFwiRVZFTlQ6OjpcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgZXYgPSBuZXcgQ3VzdG9tRXZlbnQoXCJpbmNvbWluZy1ob3N0YWdlbnQtZXZlbnQtbXNnXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbDogX21zZ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBldiA9IG5ldyBDdXN0b21FdmVudChcImluY29taW5nLWhvc3RhZ2VudC1yZXNwb25zZS1tc2dcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiBfbXNnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgLy9ub3QgdmFsaWQgbXNnXG4gICAgICAgICAgICAgICAgdmFyIF9tc2cgPSB7ZXJyb3I6IGUsIGxhYmVsOiBgJHt0aGlzLm5hbWV9LW1lc3NhZ2UtZXJyb3JgfVxuICAgICAgICAgICAgICAgIGV2ID0gbmV3IEN1c3RvbUV2ZW50KF9tc2cubGFiZWwsIHtcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiBfbXNnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZXY7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9jb25uZWN0aW9uLm9uKFwiaW5jb21pbmctaG9zdGFnZW50LXJlc3BvbnNlLW1zZ1wiLCAobXNnKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKFwiRXZlbnQ6XCIsIFwiIGluY29taW5nLWhvc3RhZ2VudC1yZXNwb25zZS1tc2cgPSBcIiwgbXNnKTtcbiAgICAgICAgICAgIC8vIHRoaXMudWlWYXJzLmhvc3RhZ2VudFJlc3BvbnNlTXNnTG9nRWwuYXBwZW5kQ2hpbGQodGFibGVIdG1sKTtcbiAgICAgICAgICAgIGlmIChtc2cub3AuaW5jbHVkZXMoXCJ8fHxcIikgJiYgbXNnLnN0YXR1c0NvZGUgPT0gMikge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NyZWF0ZUV2ZW50U3Vic2NyaXB0aW9uKG1zZy5vcCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHRoaXMub24oKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuXG4gICAgICAgIHRoaXMuX2Nvbm5lY3Rpb24ub24oXCJpbmNvbWluZy1ob3N0YWdlbnQtZXZlbnQtbXNnXCIsIChtc2cpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCJFdmVudDpcIiwgXCIgaW5jb21pbmctaG9zdGFnZW50LWV2ZW50LW1zZyA9IFwiLCBtc2cpO1xuICAgICAgICAgICAgdGhpcy51aVZhcnMuZXZlbnRDb3VudGVyc1ttc2cub3BdICs9IDE7XG4gICAgICAgICAgICAvLyB0aGlzLnVpVmFycy5ob3N0YWdlbnRSZXNwb25zZU1zZ0xvZ0VsLmFwcGVuZENoaWxkKHRhYmxlSHRtbCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uQ29ubmVjdCgpIHtcblxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTXVmZmluOyJdLCJuYW1lcyI6WyJXZWJNZXNzYWdlIiwiTXVmZmluIiwiTGV4ZW1lIiwidWlkIiwic2VuZGVyIiwicGFyYW1zIiwic3ViamVjdCIsIm9iamVjdGl2ZSIsImludGVyZmFjZSIsInRva2VuIiwicmVxdWVzdCIsInN1YnNjcmliZSIsIkFQSV9MRVhJQ09OIiwiV0VCX01FU1NBR0VfTEVYSUNPTiIsImNvbmZpZyIsInNhbmRib3hfbG9jYWwiLCJob3N0TmFtZSIsInBhdGgiLCJjaGFubmVsSW5zdGFuY2VTaWciLCJhcGlfcHJvdG9jb2wiLCJzYW5kYm94IiwiV2ViUmVxdWVzdFNkayIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsImxhenlsb2FkIiwiY29uc29sZSIsImRlYnVnIiwiZXZlbnRJbnRlcmZhY2UiLCJQb3N0T2ZmaWNlIiwiZ2V0T3JDcmVhdGVJbnRlcmZhY2UiLCJMRVhJQ09OIiwibGFiZWwiLCJjbGllbnRJZCIsImNsaWVudF9pZCIsInBhc3MiLCJjb25uZWN0ZWRTdG9yZXMiLCJ1aVZhcnMiLCJjbG9jayIsIl9jb25uZWN0aW9uIiwic3RhdGUiLCJjb25uZWN0IiwiZXZlbnRTdWJzY3JpcHRpb25zIiwiU2V0IiwiZXZlbnRDb3VudGVycyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZmluYWxVcmwiLCJhZGRTb2NrZXQiLCJXZWJTb2NrZXQiLCJhdXRvUmV0cnlPbkNsb3NlIiwic29ja2V0Iiwib25lcnJvciIsImUiLCJtc2ciLCJtZXNzYWdlIiwiZGlzcGF0Y2hNZXNzYWdlIiwib25vcGVuIiwib25jbG9zZSIsIm9ubWVzc2FnZSIsIl9tc2dTdHIiLCJkYXRhIiwiX21zZyIsIkpTT04iLCJwYXJzZSIsImVycm9yIiwib3AiLCJpbmNsdWRlcyIsImdldFNlcmlhbGl6YWJsZUludHJvIiwiT2JqZWN0Iiwia2V5cyIsIm1hcCIsIl9sZXhlbWUiLCJfc2NoZW1hIiwic2NoZW1hIiwiZnVsbE5hbWUiLCJuYW1lIiwiZ2V0SW50cm8iLCJfZ2V0TGV4ZW1lIiwiX2xleGVtZUxhYmVsIiwiX2luZmxlY3RMZXhlbWUiLCJfc2VsZWN0ZWRMZXhlbWUiLCJfc2VsZWN0ZWRMZXhlbWVJbmZsZWN0aW9uIiwiaW5mbGVjdCIsImdlbkZpeHR1cmVzIiwic3RyaW5naWZ5IiwiY29tbXVuaWNhdGUiLCJpbmZsZWN0aW9uIiwidGVzdFN0YXJ0IiwiRGF0ZSIsIm5vdyIsInNlbmQiLCJfb3BMYWJlbCIsIk1BWF9SRVNQT05TRV9USU1FIiwib24iLCJyZXN1bHQiLCJzZXRUaW1lb3V0IiwiX2NyZWF0ZUV2ZW50U3Vic2NyaXB0aW9uIiwiYWRkIiwiX25hbWUiLCJzb2NrZXRzIiwiZ2xvYmFsIiwiYnJvYWRjYXN0TXNnIiwiX2Nvbm5lY3RIb3N0IiwibG9nIiwiX2Nvbm5lY3Rpb25Nc2dFdiIsImV2IiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJzdGF0dXNDb2RlIiwib25Db25uZWN0Il0sIm1hcHBpbmdzIjoiOzs7SUFBQSxNQUFNQSxVQUFOLFNBQXlCQyxNQUFNLENBQUNDLE1BQWhDLENBQXVDOzswQkFBakNGOzs7YUFDWTs7MEJBRFpBOzs7YUFHc0I7SUFDcEJHLElBQUFBLEdBQUcsRUFBRSxJQURlO0lBRXBCQyxJQUFBQSxNQUFNLEVBQUUsSUFGWTtJQUdwQkMsSUFBQUEsTUFBTSxFQUFFLEVBSFk7SUFJcEJDLElBQUFBLE9BQU8sRUFBRSxJQUpXO0lBS3BCQyxJQUFBQSxTQUFTLEVBQUU7SUFMUzs7MEJBSHRCUDs7O2FBV2M7SUFDWlEsSUFBQUEsU0FBUyxFQUFFLElBREM7SUFFWkMsSUFBQUEsS0FBSyxFQUFFLElBRks7SUFHWkMsSUFBQUEsT0FBTyxFQUFFLElBSEc7SUFJWkMsSUFBQUEsU0FBUyxFQUFFO0lBSkM7OztJQ1ZwQixNQUFNQyxXQUFXLEdBQUcsRUFBQyxHQUFHLEVBQUo7SUFBUSxLQUFHQztJQUFYLENBQXBCO0lBRUEsTUFBTUMsTUFBTSxHQUFHO0lBQ1hDLEVBQUFBLGFBQWEsRUFBRTtJQUNYQyxJQUFBQSxRQUFRLEVBQUUsZ0JBREM7SUFFWEMsSUFBQUEsSUFBSSxFQUFFLE9BRks7SUFHWEMsSUFBQUEsa0JBQWtCLEVBQUUsRUFIVDtJQUlYQyxJQUFBQSxZQUFZLEVBQUU7SUFKSCxHQURKO0lBT1hDLEVBQUFB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
